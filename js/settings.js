export function renderSettings(e,t,n){if(!e||!t||!n)throw new Error("[SETTINGS_ERROR] Invalid argument");const o=document.getElementById("settings");if(!o)return;("ontouchstart"in window||navigator.maxTouchPoints>0)&&(window.location.pathname.includes("/room")||o.classList.add("t-25px")),o.innerHTML='\n    <div class="settings-actions">\n        <button id="btnSettings">\n            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-settings"><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/><circle cx="12" cy="12" r="3"/></svg>\n        </button>\n    </div>\n  ';let s=null,c=null,a=null;function l(e){const t=document.createElement("div");return e&&t.classList.add(e),t}function i(){const e=l("settings-options"),t=document.createElement("ul"),o={Boards:d(),Pieces:r()};return Object.keys(o).forEach((e=>{const n=document.createElement("li");t.append(n),n.textContent=e,n.classList.add("expandable"),n.onclick=()=>{c.replaceChildren(o[e]),a.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-left"><path d="m15 18-6-6 6-6"/></svg>'+e}})),e.append(t,function(){const e=l("settings-bot"),t=l("title"),o=document.createElement("span"),s=document.createElement("span"),c=document.createElement("input");o.textContent="Bot Difficulty",s.textContent="Level 1";let a=localStorage.getItem("difficulty");c.type="range",c.min="0",c.max="7",c.value=+a<=-1?"7":a;const i=()=>{parseInt(c.value)<7?s.textContent="Level "+(parseInt(c.value)+1):s.textContent="max"};return i(),c.oninput=()=>{i()},c.onchange=()=>{let e=c.value<7?c.value:-1;n(e),localStorage.setItem("difficulty",e)},t.append(o,s),e.append(t,c),e}()),e}function r(){const t=l("settings-view--pieces"),n=l("settings-options"),o=document.createElement("ul"),s=["cburnett","fritz","icy_sea","ocean","glass","game_room","neo","3d_staunton"],c=["wk","bq","wr","bb","wn","bp"],a="https://raw.githubusercontent.com/lightzane/chess.com-boards-and-pieces/refs/heads/main/pieces",i=/\/pieces\/(.*)\/(.*)\./i,r=/\/pieces\/.*\/(b|w)(k|q|r|b|n|p)\.(svg|png)$/i,d=localStorage.getItem("pieces");return s.includes(d)||localStorage.removeItem("pieces"),s.forEach((t=>{const n=document.createElement("li");d===t&&(n.classList.add("selected"),setTimeout((()=>{n.scrollIntoView({behavior:"smooth"})}),1e3)),o.append(n);let s="png";"cburnett"===t&&(s="svg"),c.forEach((e=>{const o=document.createElement("img");o.src=((e,t)=>`${a}/${e}/${t}.`)(t,e)+s,n.append(o)})),n.onclick=()=>{Object.keys(e).forEach((n=>{const o=e[n];if(!r.test(o))return;const[c,l,i]=r.exec(o),d=`${a}/${t}/${l}${i}.${s}`;e[n]=d})),document.querySelectorAll(".board .square .piece img").forEach((e=>{if(!i.test(e.src))return;const[n,o,c]=i.exec(e.src);e.src=`${a}/${t}/${c}.${s}`})),o.querySelectorAll("li").forEach((e=>e.classList.remove("selected"))),n.classList.add("selected"),localStorage.setItem("pieces",t)}})),t.append(n),n.append(o),t}function d(){const e=l("settings-view--boards"),n=l("settings-options"),o=document.createElement("ul"),s=["custompink","icy_sea","customwood","custombrown","customblue","dark_wood","bases","customgreen"],c=/^\/([a-z]*)\/*/i;let a=window.location.pathname;if(c.test(a)){const e=["room","cheese"],t=c.exec(a)[1];a=e.includes(t)?"/"+t:"..","room"===t&&(a="")}const i=`${a}/images/board`,r=localStorage.getItem("board");return s.includes(r)||localStorage.removeItem("board"),s.forEach((e=>{const n=document.createElement("li");r===e&&(n.classList.add("selected"),setTimeout((()=>{n.scrollIntoView({behavior:"smooth"})}),1e3)),o.append(n);const s=document.createElement("img");s.src=`${i}/thumbnail-${e.replace("custom","")}.png`,n.append(s),n.onclick=()=>{t(e),o.querySelectorAll("li").forEach((e=>e.classList.remove("selected"))),n.classList.add("selected"),localStorage.setItem("board",e)}})),e.append(n),n.append(o),e}document.getElementById("btnSettings").addEventListener("click",(()=>{s=function(){const e=l("settings-popup");return e.append(function(){const e=l("settings-content"),t=l("settings-header"),n=l("settings-body"),o=l("settings-title"),r=document.createElement("a");return e.onclick=e=>{e.stopPropagation()},o.textContent="Settings",r.classList.add("close"),r.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-x"><circle cx="12" cy="12" r="10"/><path d="m15 9-6 6"/><path d="m9 9 6 6"/></svg>',r.href="#",r.onclick=e=>{e.preventDefault(),s.remove(),s=null},c=i(),a=o,a.onclick=()=>{a.innerHTML="Settings",c.replaceChildren(i())},e.append(t),e.append(n),t.append(o),t.append(r),n.append(c),e}()),e}(),s.onclick=()=>{s.remove(),s=null},document.body.append(s)}))}