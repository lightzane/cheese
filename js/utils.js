export const uuid=(e=Math,t=16,n=n=>e.floor(n).toString(t),o=o=>" ".repeat(o).replace(/./g,(()=>n(e.random()*t))))=>o(8)+"-"+o(4)+"-"+o(4)+"-"+o(4)+"-"+o(12);export function displayQRCode(){const e=document.querySelector(".qr-container");if(!e)return;e.style.display="flex";const t=document.getElementById("qr");if(!t)return void(e.style.display="none");new QRCode(t,window.location.href);let n=document.getElementById("qrIcon");const o=t.querySelector("img"),a=t.getBoundingClientRect().width;let r=0;n||(r=.35*a,n=document.createElement("img"),n.id="qrIcon",n.alt="qr-icon",n.style.width=`${r}px`,e.append(n)),n.src="./images/wn.png";const c=.65*r,i=(a-c)/2;let l=0;function s(){if(l++,2!==l)return;const r=document.createElement("canvas"),s=r.getContext("2d"),p=window.devicePixelRatio||1;r.width=a*p,r.height=a*p,r.style.width=`${a}px`,r.style.height=`${a}px`,s.scale(p,p),s.drawImage(o,0,0);const d=a/2,g=d,u=.15*a,m=2*Math.PI;s.lineWidth=3.5,s.strokeStyle="gold",s.fillStyle="#fff9c4",s.beginPath(),s.arc(d,g,u,0,m),s.fill(),s.stroke(),s.drawImage(n,i,i,c,c);const h=new Image;h.id="merged",h.src=r.toDataURL(),h.alt="qr-code",h.title=t.title,e.append(h),n.remove(),o.remove()}o.onload=s,n.onload=s}export function hideQRCode(){const e=document.querySelector(".qr-container");e&&(e.style.display="none")}export async function lock(){if("wakeLock"in navigator)try{wakeLock=await navigator.wakeLock.request("screen"),wakeLock.addEventListener("release",(()=>{}))}catch(e){}else console.warn("Lock not supported")}export function getDate(){const e=new Date(Date.now());return`${e.getFullYear()}.${(e.getMonth()+1).toString().padStart(2,"0")}.${e.getDate().toString().padStart(2,"0")}`}export function isUppercase(e){return e===e.toUpperCase()}export function simpleClone(e){return e.map((e=>({...e})))}export function generateChess960StartingPos(){let e="12345678",t="12345678";const n=[1,3,5,7][getRandom(0,3)];e=e.replace(n,"b"),t=t.replace(n,"");const o=[2,4,6,8][getRandom(0,3)];e=e.replace(o,"b"),t=t.replace(o,"");const a=t[getRandom(0,t.length-1)];e=e.replace(a,"q"),t=t.replace(a,"");const r=t[getRandom(0,t.length-1)];e=e.replace(r,"n"),t=t.replace(r,"");const c=t[getRandom(0,t.length-1)];e=e.replace(c,"n"),t=t.replace(c,"");const i=t[1];return e=e.replace(i,"k"),t=t.replace(i,""),e=e.replace(/\d/gi,"r"),"black/pppppppp/8/8/8/8/PPPPPPPP/white w KQkq - 0 1".replace("black",e).replace("white",e.toUpperCase())}export function getRandom(e=1,t=6){return Math.floor(Math.random()*(t-e+1))+e}window.addEventListener("contextmenu",(e=>{e.preventDefault()}));let e=0;async function t(){let e=null;try{e=await fetch("https://api.github.com/repos/nmrugg/stockfish.js/contents/src/stockfish-17-asm.js",{method:"GET",headers:{Accept:"application/vnd.github+json","X-GitHub-Api-Version":"2022-11-28"}})}catch(e){console.error(e)}if(e&&404===e.status){const e="⚠️ A new version of engine is available!";console.warn(e),alert(e)}}window.addEventListener("touchend",(t=>{const n=(new Date).getTime();n-e<=555?t.preventDefault():e=n})),Math.random()<.3&&t();