export const uuid=(e=Math,t=16,n=n=>e.floor(n).toString(t),o=o=>" ".repeat(o).replace(/./g,(()=>n(e.random()*t))))=>o(8)+"-"+o(4)+"-"+o(4)+"-"+o(4)+"-"+o(12);export function displayQRCode(){const e=document.querySelector(".qr-container");if(!e)return;e.style.display="flex";const t=document.getElementById("qr");if(!t)return void(e.style.display="none");new QRCode(t,window.location.href);let n=document.getElementById("qrIcon");const o=t.querySelector("img"),r=t.getBoundingClientRect().width;let a=0;n||(a=.35*r,n=document.createElement("img"),n.id="qrIcon",n.alt="qr-icon",n.style.width=`${a}px`,e.append(n)),n.src="./images/wn.png";const i=.65*a,c=(r-i)/2;let l=0;function s(){if(l++,2!==l)return;const a=document.createElement("canvas"),s=a.getContext("2d"),d=window.devicePixelRatio||1;a.width=r*d,a.height=r*d,a.style.width=`${r}px`,a.style.height=`${r}px`,s.scale(d,d),s.drawImage(o,0,0);const p=r/2,g=p,u=.15*r,h=2*Math.PI;s.lineWidth=3.5,s.strokeStyle="gold",s.fillStyle="#fff9c4",s.beginPath(),s.arc(p,g,u,0,h),s.fill(),s.stroke(),s.drawImage(n,c,c,i,i);const f=new Image;f.id="merged",f.src=a.toDataURL(),f.alt="qr-code",f.title=t.title,e.append(f),n.remove(),o.remove()}o.onload=s,n.onload=s}export function hideQRCode(){const e=document.querySelector(".qr-container");e&&(e.style.display="none")}export async function lock(){if("wakeLock"in navigator)try{wakeLock=await navigator.wakeLock.request("screen"),wakeLock.addEventListener("release",(()=>{}))}catch(e){}else console.warn("Lock not supported")}export function getDate(){const e=new Date(Date.now());return`${e.getFullYear()}.${(e.getMonth()+1).toString().padStart(2,"0")}.${e.getDate().toString().padStart(2,"0")}`}export function isUppercase(e){return e===e.toUpperCase()}export function simpleClone(e){return e.map((e=>({...e})))}export function generateChess960StartingPos(e=""){let t="black/pppppppp/8/8/8/8/PPPPPPPP/white w KQkq - 0 1",n="12345678",o="12345678",r="",a="",i="",c="";if(e){const n=e.split("/")[0];r=String.fromCharCode(97+n.indexOf("k"))+"1",a=String.fromCharCode(97+n.indexOf("k"))+"8";const o=n.indexOf("r");c=String.fromCharCode(97+o),i=String.fromCharCode(97+n.indexOf("r",o+1)),t=e}else{const e=[1,3,5,7][getRandom(0,3)];n=n.replace(e,"b"),o=o.replace(e,"");const l=[2,4,6,8][getRandom(0,3)];n=n.replace(l,"b"),o=o.replace(l,"");const s=o[getRandom(0,o.length-1)];n=n.replace(s,"q"),o=o.replace(s,"");const d=o[getRandom(0,o.length-1)];n=n.replace(d,"n"),o=o.replace(d,"");const p=o[getRandom(0,o.length-1)];n=n.replace(p,"n"),o=o.replace(p,"");const g=o[1];n=n.replace(g,"k"),o=o.replace(g,""),r=String.fromCharCode(96+parseInt(g))+"1",a=String.fromCharCode(96+parseInt(g))+"8",n=n.replace(/\d/gi,"r"),i=String.fromCharCode(96+parseInt(o[1])),c=String.fromCharCode(96+parseInt(o[0])),t=t.replace("black",n).replace("white",n.toUpperCase())}return{whiteKingSquareId:r,blackKingSquareId:a,kingRookFile:i,queenRookFile:c,fen:t}}export function getRandom(e=1,t=6){return Math.floor(Math.random()*(t-e+1))+e}export function letterRange(e,t){let n=[];for(let o=e.charCodeAt(0);o<=t.charCodeAt(0);o++)n.push(String.fromCharCode(o));return e>t&&(n.push(e),n.push(t)),n}window.addEventListener("contextmenu",(e=>{e.preventDefault()}));let e=0;async function t(){let e=null;try{e=await fetch("https://api.github.com/repos/nmrugg/stockfish.js/contents/src/stockfish-17-asm.js",{method:"GET",headers:{Accept:"application/vnd.github+json","X-GitHub-Api-Version":"2022-11-28"}})}catch(e){console.error(e)}if(e&&404===e.status){const e="⚠️ A new version of engine is available!";console.warn(e),alert(e)}}window.addEventListener("touchend",(t=>{const n=(new Date).getTime();n-e<=555?t.preventDefault():e=n})),Math.random()<.3&&t();